{% extends "base.html.twig" %}

{% block title %}Task{% endblock %}
{% block body %}
    {% block nav %}
        {{ parent() }}
    {% endblock %}
    {% if is_granted('IS_AUTHENTICATED_REMEMBERED') %}
        <div class="container task-admin-index">
            <h1>Tareas
                {% if is_granted('ROLE_SUPER_ADMIN') or is_granted('ROLE_ADMIN') %}
                    <a style="color: #1d2124;float: right" href="{{ path('new.multi.task') }}"
                       class="nav-item nav-link"><b><i class="bi bi-file-earmark-plus-fill"></i></b></a>
                {% endif %}
            </h1>
            <p id="info-admin-task"></p>
            <div id="admin-task" class="table-responsive table-bordered">Loading...</div>
            <script src="{{ asset('bundles/datatables/js/datatables.js') }}"></script>
            <script>
                $(function () {
                    $('#admin-task').initDataTables({{ datatable_settings(datatable) }}
                        , {
                            searching: true,
                            dom: '<"html5buttons"B>lTfgitp',
                            buttons: [
                                'copy',
                                {extend: 'pdf', title: 'domains'},
                                {extend: 'print'}
                            ]
                        }).then(function (dt) {
                        // dt contains the initialized instance of DataTables
                        dt.on('draw',
                            function () {
                            })
                    });
                });
            </script>
        </div>
    {% endif %}
{% endblock %}